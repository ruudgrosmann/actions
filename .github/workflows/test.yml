name: tester
on: push
env:
  PASS: ${{ secrets.WACHTWOORD }}
  GP: ${{ secrets.POSTMARK_API_TOKEN }}
jobs:
  tester:
    runs-on: ubuntu-latest
    environment: dev
    steps:
      - name: check out repostitory
        uses: actions/checkout@v4
      - name: post npm install
        shell: bash
        run: |
          echo git-ref ${{ github.ref_name }}
          echo ${{ github.workspace }}
          ls -R ${{ github.workspace }}
          ls -R ${{ github.workspace }}/.github
      - name: NPM Install
        uses: ./.github/actions/npm-install
        with:
          node_auth_token: ${{ secrets.SDU_READ_PACKAGES_GH_PAT }}
          node_version: 20.11.0
      - name: shell
        shell: bash
        run: |
          echo home $HOME
          echo home3 ${{ vars.HOME }}
          echo user ${{ vars.USERNAME }}
          bin/verklap ">> $PASS"
          bin/verklap "># ${{ secrets.SECRET }}"
          bin/verklap "># $GP"
          cat bin/tester
          node zipper.js
          ls ${{ github.workspace }}
      - name: Send email
        uses: devellany/send-mail@v1.0.2
        with:
          host: smtp.postmarkapp.com
          port: 25
          account: ${{secrets.POSTMARK_API_TOKEN}}
          password: ${{secrets.POSTMARK_API_TOKEN}}
          sender: devellany
          from: informatie@sdu.nl
          subject: mail van github 1
          body: file://mail.html
          attachments: '[{"path":"${{github.workspace}}/package.json"}]'
          to: r.grosmann@sdu.nl
      - run: echo "üçè This jobs status is ${{ job.status }}."

